#!/usr/bin/env python3

date=$(date +%d%m%y-%H%M%S)
extension=".jpg"
notify_bg="#22a34b"
notify_fg="#000000"

sleep 0.3
case "$1" in
    1)
        import -window root -display :0.0 -crop '1920x1080+1920+0' -quality 100 /tmp/$date$extension
        notify_msg="Screenshot of first monitor captured." ;;
    2)
        import -window root -display :0.0 -crop '1920x1080+0+0' -quality 100 /tmp/$date$extension
        notify_msg="Screenshot of second monitor captured." ;;
    *)
        import -quality 100 /tmp/$date$extension
        notify_msg="Screenshot of region/window captured." ;;
esac

mv /tmp/$date$extension ~/Dropbox/Public/screenshots/
dropbox-cli sharelink ~/Dropbox/Public/screenshots/$date$extension | xclip -select "clipboard"
notify-send -h string:bgcolor:$notify_bg -h string:fgcolor:$notify_fg SCREENSHOT "$notify_msg"
